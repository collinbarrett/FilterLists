# overrides for production deployment

version: "3.8"

services:
  filterlists.reverse_proxy:
    image: nginx:alpine
    ports:
      - "443:443"
    networks:
      - reverse_proxy
    depends_on:
      - filterlists.web
      - filterlists.directory.api
    volumes:
      - ./reverse-proxy/svr-includes:/etc/nginx/svr-includes:ro
      - ./reverse-proxy/conf.d:/etc/nginx/conf.d:ro
      - ~/cert:/etc/nginx/cert:ro

  filterlists.web:
    build:
      context: . # hack for https://github.com/docker/compose/issues/4047
